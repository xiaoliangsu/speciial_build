webpackJsonp([33],{678:function(e,t,s){function n(e){s(807)}var a=s(47)(s(731),s(844),n,null,null);e.exports=a.exports},731:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(98);t.default={name:"message",data:function(){var e=this,t=function(t,s){return t("Button",{props:{size:"small"},on:{click:function(){e.hasreadMesList.unshift(e.currentMesList.splice(s.index,1)[0]);var t=[s.row.id];n.c(t).then(function(t){200==t.status&&e.$Message.info("该条消息已阅读")}).catch(function(e){console.log(e)})}}},"标为已读")};return{author_key:"",currentMesList:[],unreadMesList:[],hasreadMesList:[],recyclebinList:[],systemMsgList:[],currentMessageType:"unread",showMesTitleList:!0,unreadCount:0,hasreadCount:0,recyclebinCount:0,systemMsgCount:0,noDataText:"暂无未读消息",mes:{title:"",time:"",content:""},mesTitleColumns:[{title:" ",key:"content",align:"left",ellipsis:!0,render:function(t,s){return"systemMsg"===e.currentMessageType?t("span",{},s.row.content):"unread"===e.currentMessageType||"hasread"===e.currentMessageType?t("a",{on:{click:function(){var t=[s.row.id];n.c(t).then(function(t){200==t.status&&(e.$router.push({path:"appDetail",query:{applyId:s.row.detailUrl}}),e.hasreadMesList.unshift(e.currentMesList.splice(s.index,1)[0]),e.$Message.info("该条消息已阅读"))}).catch(function(e){console.log(e)})}}},s.row.content):void 0}},{title:" ",key:"time",align:"center",width:200,render:function(e,t){return e("span",[e("Icon",{props:{type:"android-time",size:12},style:{margin:"0 5px"}}),e("span",{props:{type:"android-time",size:12}},t.row.createTime)])}},{title:" ",key:"asread",align:"center",width:100,render:function(s,n){if("unread"===e.currentMessageType)return s("div",[t(s,n)]);e.currentMessageType}}]}},methods:{formatDate:function(e){var t=new Date(e);return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+"  "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},backMesTitleList:function(){this.showMesTitleList=!0},setCurrentMesType:function(e){this.currentMessageType!==e&&(this.showMesTitleList=!0),this.currentMessageType=e,"unread"===e?(this.noDataText="暂无未读消息",this.currentMesList=this.unreadMesList):"hasread"===e?(this.noDataText="暂无已读消息",this.currentMesList=this.hasreadMesList):(this.noDataText="无系统消息",this.currentMesList=this.systemMsgList)}},mounted:function(){var e=this;this.author_key=localStorage.getItem("author_key"),console.log(1==this.author_key),1==this.author_key?this.currentMessageType="unread":this.currentMessageType="systemMsg",n.a().then(function(t){e.currentMesList=e.unreadMesList=t}).catch(function(e){console.log(e)}),n.d().then(function(t){e.hasreadMesList=t}).catch(function(e){console.log(e)}),n.b().then(function(t){1==e.author_key?e.systemMsgList=t:e.currentMesList=e.systemMsgList=t}).catch(function(e){console.log(e)}),this.unreadCount=this.unreadMesList.length,this.hasreadCount=this.hasreadMesList.length,this.systemMsgCount=this.systemMsgList.length},watch:{unreadMesList:function(e){this.unreadCount=e.length},hasreadMesList:function(e){this.hasreadCount=e.length},systemMsgList:function(e){this.systemMsgCount=e.length}}}},771:function(e,t,s){t=e.exports=s(648)(!0),t.push([e.i,".message-main-con{position:absolute;left:0;top:0;right:0;bottom:0}.message-mainlist-con{position:absolute;left:0;top:10px;width:300px;bottom:0;padding:10px 0}.message-mainlist-con div{padding:10px;margin:0 20px;border-bottom:1px dashed #d2d3d2}.message-mainlist-con div:last-child{border:none}.message-mainlist-con div .message-count-badge-outer{float:right}.message-mainlist-con div .message-count-badge{background:#d2d3d2}.message-mainlist-con div:first-child .message-count-badge{background:#ed3f14}.message-mainlist-con div .mes-type-btn-text{margin-left:10px}.message-content-con{position:absolute;top:10px;right:10px;bottom:10px;left:300px;background:#fff;border-radius:3px;box-shadow:2px 2px 10px 2px rgba(0,0,0,.1);overflow:auto}.message-content-con .message-title-list-con{width:100%;height:100%}.message-content-con .message-content-top-bar{height:40px;width:100%;background:#fff;position:absolute;left:0;top:0;border-bottom:1px solid #dededb}.message-content-con .message-content-top-bar .mes-back-btn-con{position:absolute;width:70px;height:30px;left:0;top:5px}.message-content-con .message-content-top-bar .mes-title{position:absolute;top:0;right:70px;bottom:0;left:70px;line-height:40px;padding:0 30px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}.message-content-con .mes-time-con{position:absolute;width:100%;top:40px;left:0;padding:20px 0;text-align:center;font-size:14px;color:#b7b7b5}.message-content-con .message-content-body{position:absolute;top:90px;right:0;bottom:0;left:0;overflow:auto}.message-content-con .message-content-body .message-content{padding:10px 20px}.back-message-list-enter,.back-message-list-leave-to{opacity:0}.back-message-list-enter-active,.back-message-list-leave-active{transition:all .5s}.back-message-list-enter-to,.back-message-list-leave{opacity:1}.view-message-enter,.view-message-leave-to{opacity:0}.view-message-enter-active,.view-message-leave-active{transition:all .5s}.view-message-enter-to,.view-message-leave{opacity:1}.mes-current-type-btn-enter,.mes-current-type-btn-leave-to{opacity:0;width:0}.mes-current-type-btn-enter-active,.mes-current-type-btn-leave-active{transition:all .3s}.mes-current-type-btn-enter-to,.mes-current-type-btn-leave{opacity:1;width:12px}","",{version:3,sources:["/Users/zhangyunlong/Downloads/my-project/src/page/message/message.vue"],names:[],mappings:"AACA,kBACE,kBAAmB,AACnB,OAAU,AACV,MAAS,AACT,QAAW,AACX,QAAY,CACb,AACD,sBACE,kBAAmB,AACnB,OAAQ,AACR,SAAU,AACV,YAAa,AACb,SAAU,AACV,cAAgB,CACjB,AACD,0BACE,aAAc,AACd,cAAe,AACf,gCAAkC,CACnC,AACD,qCACE,WAAa,CACd,AACD,qDACE,WAAa,CACd,AACD,+CACE,kBAAoB,CACrB,AACD,2DACE,kBAAoB,CACrB,AACD,6CACE,gBAAkB,CACnB,AACD,qBACE,kBAAmB,AACnB,SAAU,AACV,WAAY,AACZ,YAAa,AACb,WAAY,AACZ,gBAAkB,AAClB,kBAAmB,AACnB,2CAAgD,AAChD,aAAe,CAChB,AACD,6CACE,WAAY,AACZ,WAAa,CACd,AACD,8CACE,YAAa,AACb,WAAY,AACZ,gBAAkB,AAClB,kBAAmB,AACnB,OAAQ,AACR,MAAO,AACP,+BAAiC,CAClC,AACD,gEACE,kBAAmB,AACnB,WAAY,AACZ,YAAa,AACb,OAAQ,AACR,OAAS,CACV,AACD,yDACE,kBAAmB,AACnB,MAAO,AACP,WAAY,AACZ,SAAU,AACV,UAAW,AACX,iBAAkB,AAClB,eAAgB,AAChB,mBAAoB,AACpB,gBAAiB,AACjB,uBAAwB,AACxB,iBAAmB,CACpB,AACD,mCACE,kBAAmB,AACnB,WAAY,AACZ,SAAU,AACV,OAAQ,AACR,eAAgB,AAChB,kBAAmB,AACnB,eAAgB,AAChB,aAAe,CAChB,AACD,2CACE,kBAAmB,AACnB,SAAU,AACV,QAAS,AACT,SAAU,AACV,OAAQ,AACR,aAAe,CAChB,AACD,4DACE,iBAAmB,CACpB,AACD,qDAEE,SAAW,CACZ,AACD,gEAEE,kBAAoB,CACrB,AACD,qDAEE,SAAW,CACZ,AACD,2CAEE,SAAW,CACZ,AACD,sDAEE,kBAAoB,CACrB,AACD,2CAEE,SAAW,CACZ,AACD,2DAEE,UAAW,AACX,OAAS,CACV,AACD,sEAEE,kBAAoB,CACrB,AACD,2DAEE,UAAW,AACX,UAAY,CACb",file:"message.vue",sourcesContent:["\n.message-main-con {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n}\n.message-mainlist-con {\n  position: absolute;\n  left: 0;\n  top: 10px;\n  width: 300px;\n  bottom: 0;\n  padding: 10px 0;\n}\n.message-mainlist-con div {\n  padding: 10px;\n  margin: 0 20px;\n  border-bottom: 1px dashed #d2d3d2;\n}\n.message-mainlist-con div:last-child {\n  border: none;\n}\n.message-mainlist-con div .message-count-badge-outer {\n  float: right;\n}\n.message-mainlist-con div .message-count-badge {\n  background: #d2d3d2;\n}\n.message-mainlist-con div:first-child .message-count-badge {\n  background: #ed3f14;\n}\n.message-mainlist-con div .mes-type-btn-text {\n  margin-left: 10px;\n}\n.message-content-con {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  bottom: 10px;\n  left: 300px;\n  background: white;\n  border-radius: 3px;\n  box-shadow: 2px 2px 10px 2px rgba(0, 0, 0, 0.1);\n  overflow: auto;\n}\n.message-content-con .message-title-list-con {\n  width: 100%;\n  height: 100%;\n}\n.message-content-con .message-content-top-bar {\n  height: 40px;\n  width: 100%;\n  background: white;\n  position: absolute;\n  left: 0;\n  top: 0;\n  border-bottom: 1px solid #dededb;\n}\n.message-content-con .message-content-top-bar .mes-back-btn-con {\n  position: absolute;\n  width: 70px;\n  height: 30px;\n  left: 0;\n  top: 5px;\n}\n.message-content-con .message-content-top-bar .mes-title {\n  position: absolute;\n  top: 0;\n  right: 70px;\n  bottom: 0;\n  left: 70px;\n  line-height: 40px;\n  padding: 0 30px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-align: center;\n}\n.message-content-con .mes-time-con {\n  position: absolute;\n  width: 100%;\n  top: 40px;\n  left: 0;\n  padding: 20px 0;\n  text-align: center;\n  font-size: 14px;\n  color: #b7b7b5;\n}\n.message-content-con .message-content-body {\n  position: absolute;\n  top: 90px;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: auto;\n}\n.message-content-con .message-content-body .message-content {\n  padding: 10px 20px;\n}\n.back-message-list-enter,\n.back-message-list-leave-to {\n  opacity: 0;\n}\n.back-message-list-enter-active,\n.back-message-list-leave-active {\n  transition: all .5s;\n}\n.back-message-list-enter-to,\n.back-message-list-leave {\n  opacity: 1;\n}\n.view-message-enter,\n.view-message-leave-to {\n  opacity: 0;\n}\n.view-message-enter-active,\n.view-message-leave-active {\n  transition: all .5s;\n}\n.view-message-enter-to,\n.view-message-leave {\n  opacity: 1;\n}\n.mes-current-type-btn-enter,\n.mes-current-type-btn-leave-to {\n  opacity: 0;\n  width: 0;\n}\n.mes-current-type-btn-enter-active,\n.mes-current-type-btn-leave-active {\n  transition: all .3s;\n}\n.mes-current-type-btn-enter-to,\n.mes-current-type-btn-leave {\n  opacity: 1;\n  width: 12px;\n}\n"],sourceRoot:""}])},807:function(e,t,s){var n=s(771);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);s(649)("efe1a990",n,!0)},844:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-main-con"},[s("div",{staticClass:"message-mainlist-con"},[1==this.author_key?s("div",[s("Button",{attrs:{long:"",type:"text"},on:{click:function(t){e.setCurrentMesType("unread")}}},[s("transition",{attrs:{name:"mes-current-type-btn"}},[s("Icon",{directives:[{name:"show",rawName:"v-show",value:"unread"===e.currentMessageType,expression:"currentMessageType === 'unread'"}],attrs:{type:"checkmark"}})],1),e._v(" "),s("span",{staticClass:"mes-type-btn-text"},[e._v("未读消息")]),e._v(" "),s("Badge",{staticClass:"message-count-badge-outer",attrs:{"class-name":"message-count-badge",count:e.unreadCount}})],1)],1):e._e(),e._v(" "),1==this.author_key?s("div",[s("Button",{attrs:{long:"",type:"text"},on:{click:function(t){e.setCurrentMesType("hasread")}}},[s("transition",{attrs:{name:"mes-current-type-btn"}},[s("Icon",{directives:[{name:"show",rawName:"v-show",value:"hasread"===e.currentMessageType,expression:"currentMessageType === 'hasread'"}],attrs:{type:"checkmark"}})],1),e._v(" "),s("span",{staticClass:"mes-type-btn-text"},[e._v("已读消息")]),e._v(" "),s("Badge",{staticClass:"message-count-badge-outer",attrs:{"class-name":"message-count-badge",count:e.hasreadCount}})],1)],1):e._e(),e._v(" "),s("div",[s("Button",{attrs:{long:"",type:"text"},on:{click:function(t){e.setCurrentMesType("systemMsg")}}},[s("transition",{attrs:{name:"mes-current-type-btn"}},[s("Icon",{directives:[{name:"show",rawName:"v-show",value:"systemMsg"===e.currentMessageType,expression:"currentMessageType === 'systemMsg'"}],attrs:{type:"checkmark"}})],1),e._v(" "),s("span",{staticClass:"mes-type-btn-text"},[e._v("系统消息")]),e._v(" "),s("Badge",{staticClass:"message-count-badge-outer",attrs:{"class-name":"message-count-badge",count:e.systemMsgCount}})],1)],1)]),e._v(" "),s("div",{staticClass:"message-content-con"},[s("transition",{attrs:{name:"view-message"}},[e.showMesTitleList?s("div",{staticClass:"message-title-list-con"},[s("Table",{ref:"messageList",attrs:{columns:e.mesTitleColumns,data:e.currentMesList,"no-data-text":e.noDataText}})],1):e._e()]),e._v(" "),s("transition",{attrs:{name:"back-message-list"}},[e.showMesTitleList?e._e():s("div",{staticClass:"message-view-content-con"},[s("div",{staticClass:"message-content-top-bar"},[s("span",{staticClass:"mes-back-btn-con"},[s("Button",{attrs:{type:"text"},on:{click:e.backMesTitleList}},[s("Icon",{attrs:{type:"chevron-left"}}),e._v("  返回")],1)],1),e._v(" "),s("h3",{staticClass:"mes-title"},[e._v(e._s(e.mes.title))])]),e._v(" "),s("p",{staticClass:"mes-time-con"},[s("Icon",{attrs:{type:"android-time"}}),e._v(" "+e._s(e.mes.time)+"\n        ")],1),e._v(" "),s("div",{staticClass:"message-content-body"},[s("p",{staticClass:"message-content"},[e._v(e._s(e.mes.content))])])])])],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=33.4b95d8fe796450e319b3.js.map